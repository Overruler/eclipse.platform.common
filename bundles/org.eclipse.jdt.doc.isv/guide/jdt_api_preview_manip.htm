<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" href="../book.css" charset="ISO-8859-1" type="text/css">
<title>Manipulating code with a preview in a Java editor</title>
<link rel="stylesheet" type="text/css" href="../book.css">
</head>
<body>
<h2>Manipulating code with a preview in a Java editor</h2>
<p>The JDT Core plugin provides several mechanisms to programmatically create, 
  delete and modify Java elements. See <a href="jdt_api_manip.htm">manipulating 
  Java code</a> for an introducation to the API provided by JDT Core. </p>
<p>In a UI world it is often useful to have the user confirm a preview before 
  changes are saved. This can be achieved by opening a Java editor on the compilation 
  unit to be modified. The user can then either save the Java editor's content 
  to disk or revert it back to its original content. Below is a code snippet that 
  opens a compilation unit in an editor and then uses the working copy created 
  by the editor to perform the changes:</p>
<pre><font color="#4444CC">    void modifyCompilationUnit(ICompilationUnit cunit) throws PartInitException, CoreException {
        IEditorPart editor= JavaUI.openInEditor(cunit);
        IEditorInput input= editor.getEditorInput();
        IWorkingCopyManager manager= JavaUI.getWorkingCopyManager();
        manager.connect(input);
        try {
            ICompilationUnit workingCopy= manager.getWorkingCopy(input);
            // do the modifications on workingCopy using the normal JDT Core API.
        } finally {
            manager.disconnect(input);
        }
        // either keep the editor dirty or use editor.doSave(IProgressMonitor monitor)
        // to save the changes programmatically.
    }
</font></pre>
<p><a href="../hglegal2002.htm"><img border="0" src="../ngibmcpy2002.gif" alt="Copyright IBM Corporation and others 2000, 2002. All Rights Reserved."> 
  </a> </p>
</body>
</html>
